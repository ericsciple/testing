name: CI

on: [push]
jobs:
  build:
    runs-on: self-hosted
    steps:
      - id: the_success
        run: echo 'success!'
      - { run: "echo \"$STEPS\"", env: { STEPS: "${{ toJson(steps) }}" } }
      - id: the_success_bc_continue_on_error
        run: echo 'success bc continue on error' ; exit 1
        continue-on-error: true
      - { run: "echo \"$STEPS\"", env: { STEPS: "${{ toJson(steps) }}" } }
      - id: the_cancelled
        run: echo 'cancelled!' ; ping -c 100 127.0.0.1
        timeout-minutes: 1
      - { run: "echo \"$STEPS\"", env: { STEPS: "${{ toJson(steps) }}" } }
      - id: the_skipped
        run: echo 'skipped!'
      - { if: "always()", run: "echo \"$STEPS\"", env: { STEPS: "${{ toJson(steps) }}" } }


#  problem-within-container-action:
 #   runs-on: self-hosted
  #  steps:
   #   - run: |
    #      CURR_DIR="$(pwd)"
     #     sudo rm -rf $CURR_DIR
      #    mkdir $CURR_DIR
#      - uses: actions/checkout@v2
 #     - uses: ericsciple/container-action@master
  #    - run: |
   #       CURR_DIR="$(pwd)"
    #      sudo rm -rf $CURR_DIR
     #     mkdir $CURR_DIR
#  problem-within-container-job:
 #   runs-on: self-hosted
  #  container: alpine/git:latest
   # steps:
    #  - run: |
     #     CURR_DIR="$(pwd)"
      #    rm -rf $CURR_DIR
       #   mkdir $CURR_DIR
#      - uses: actions/checkout@v2
 #     - uses: actions/checkout@v2
  #      with:
   #       repository: ericsciple/container-action
    #      path: container-action
     # - run: |
      #    mv container-action/problem-matcher.json problem-matcher.json
       #   echo '::add-matcher::problem-matcher.json'
        #  echo "PROBLEM: some prob from container job FILE: $(pwd)/problem-matcher.json LINE: 3 COLUMN: 4"
#      - run: |
 #         CURR_DIR="$(pwd)"
  #        rm -rf $CURR_DIR
   #       mkdir $CURR_DIR
#  problem-within-regular-job:
 #   runs-on: self-hosted
  #  steps:
   #   - run: |
    #      CURR_DIR="$(pwd)"
     #     sudo rm -rf $CURR_DIR
      #    mkdir $CURR_DIR
#      - uses: actions/checkout@v2
 #     - uses: actions/checkout@v2
  #      with:
   #       repository: ericsciple/container-action
    #      path: container-action
     # - run: |
      #    mv container-action/problem-matcher.json problem-matcher.json
       #   echo '::add-matcher::problem-matcher.json'
        #  echo "PROBLEM: some prob from regular job FILE: $(pwd)/problem-matcher.json LINE: 4 COLUMN: 5"
#      - run: |
 #         CURR_DIR="$(pwd)"
  #        sudo rm -rf $CURR_DIR
   #       mkdir $CURR_DIR
        
        


 #   steps:
  #    - id: foo
   #     run: |
    #      echo '::set-output name=bar::%2525 %2525 %250D %250D %250A %250A'
     # - env:
      #    bar: ${{ steps.foo.outputs.bar }}
       # run: |
        #  echo "$bar"



#      - uses: actions/checkout@users/ericsciple/m164revparse
 #     - uses: actions/checkout@users/ericsciple/m164revparse
  #    - run: |
   #       git checkout ${{ github.sha }}
    #  - uses: actions/checkout@users/ericsciple/m164revparse
#      - run: |
 #         cd ..
  #        Invoke-WebRequest -Uri https://github.com/git-for-windows/git/releases/download/v2.18.0.windows.1/MinGit-2.18.0-64-bit.zip -OutFile mingit.zip
   #       mkdir mingit
    #      Expand-Archive -LiteralPath .\mingit.zip -DestinationPath .\mingit
     #     dir .\mingit
      #    echo "::add-path::$PWD\mingit\cmd"
#      - uses: actions/checkout@users/ericsciple/m164revparse
 #     - run: |
  #        git checkout ${{ github.sha }}
   #   - uses: actions/checkout@users/ericsciple/m164revparse
#      - shell: cmd
 #       run: |
  #        rmdir . /s /q
   #       git init .
    #      git remote add origin https://github.com/ericsciple/testing
     # - uses: actions/checkout@users/ericsciple/m164revparse
      #  with:
       #   clean: false
